{
	"$schema": "https://raw.githubusercontent.com/untrustedmodders/plugify/refs/heads/main/schemas/plugin.schema.json",
	"fileVersion": 1,
	"version": "${PLUGIN_VERSION}",
	"friendlyName": "[Plugify] Permissions Core",
	"description": "Minimalistic permissions core",
	"createdBy": "untrustedmodders",
	"createdByURL": "https://github.com/untrustedmodders/",
	"docsURL": "https://github.com/untrustedmodders/plugify-permissions",
	"downloadURL": "https://github.com/untrustedmodders/plugify-permissions/releases/download/v${PLUGIN_VERSION}/${PLUGIN_PACKAGE}.zip",
	"updateURL": "https://untrustedmodders.github.io/plugify-permissions/plugify-permissions.json",
	"entryPoint": "bin/plugify-permissions",
	"supportedPlatforms": [],
	"languageModule": {
		"name": "cpp"
	},
	"dependencies": [],
	"exportedMethods": [
        {
            "name": "DumpPermissions",
            "group": "UserManager",
            "description": "Get permissions of user",
            "funcName": "DumpPermissions",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID"
                }
            ],
            "retType": {
                "type": "string[]",
                "description": "Array of player permissions"
            }
        },
        {
            "name": "CanAffectUser",
            "group": "UserManager",
            "description": "Check players immunity or groups priority",
            "funcName": "CanAffectUser",
            "paramTypes": [
                {
                    "name": "id1",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID"
                },
                {
                    "name": "id2",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if player_1 priority higher/equal to player_2, false otherwise"
            }
        },
        {
            "name": "HasPermission",
            "group": "UserManager",
            "description": "Check if a user has a specific permission.",
            "funcName": "HasPermission",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "int32",
                "enum": {
                    "name": "Access",
                    "values": [
                        {
                            "name": "NotFound",
                            "value": 0,
                            "description": "User not found."
                        },
                        {
                            "name": "Disallow",
                            "value": 1,
                            "description": "Permission denied."
                        },
                        {
                            "name": "Allow",
                            "value": 2,
                            "description": "Permission allowed."
                        }
                    ]
                },
                "description": "Value indicating access status."
            }
        },
        {
            "name": "HasGroup",
            "group": "UserManager",
            "description": "Check if a user belongs to a specific group (directly or via parent groups).",
            "funcName": "HasGroup",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "group",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if user belongs to the group, false if user or group does not exist or user is not a member."
            }
        },
        {
            "name": "GetImmunity",
            "group": "UserManager",
            "description": "Get the immunity level of a user.",
            "funcName": "GetImmunity",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                }
            ],
            "retType": {
                "type": "int32",
                "description": "Immunity value, or 0 if user does not exist."
            }
        },
        {
            "name": "AddPermission",
            "group": "UserManager",
            "description": "Add a permission to a user.",
            "funcName": "AddPermission",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist."
            }
        },
        {
            "name": "AddPermissions",
            "group": "UserManager",
            "description": "Add a permissions to a user.",
            "funcName": "AddPermissions",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID"
                },
                {
                    "name": "perms",
                    "type": "string[]",
                    "ref": false,
                    "description": "Permissions array"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist"
            }
        },
        {
            "name": "RemovePermission",
            "group": "UserManager",
            "description": "Remove a permission from a user.",
            "funcName": "RemovePermission",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist."
            }
        },
        {
            "name": "RemovePermissions",
            "group": "UserManager",
            "description": "Remove a permissions to a user.",
            "funcName": "RemovePermissions",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID"
                },
                {
                    "name": "perms",
                    "type": "string[]",
                    "ref": false,
                    "description": "Permissions array"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist"
            }
        },
        {
            "name": "AddGroup",
            "group": "UserManager",
            "description": "Add a group to a user.",
            "funcName": "AddGroup",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "group",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if group added, false if user/group does not exist or user is already a member."
            }
        },
        {
            "name": "RemoveGroup",
            "group": "UserManager",
            "description": "Remove a group from a user.",
            "funcName": "RemoveGroup",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "group",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if group removed, false if user/group does not exist."
            }
        },
        {
            "name": "GetCookie",
            "group": "UserManager",
            "description": "Get a cookie value for a user.",
            "funcName": "GetCookie",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Cookie name."
                }
            ],
            "retType": {
                "type": "any",
                "description": "Cookie value, or invalid if user/cookie does not exist."
            }
        },
        {
            "name": "SetCookie",
            "group": "UserManager",
            "description": "Set a cookie value for a user.",
            "funcName": "SetCookie",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Cookie name."
                },
                {
                    "name": "cookie",
                    "type": "any",
                    "ref": false,
                    "description": "Cookie value."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist."
            }
        },
        {
            "name": "GetAllCookies",
            "group": "UserManager",
            "description": "Get all cookies from user.",
            "funcName": "GetAllCookies",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "names",
                    "type": "string[]",
                    "ref": true,
                    "description": "Array of cookie names"
                },
                {
                    "name": "values",
                    "type": "any[]",
                    "ref": true,
                    "description": "Array of cookie values"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if user does not exist (cookies may be empty - returns empty arrays)."
            }
        },
        {
            "name": "CreateUser",
            "group": "UserManager",
            "description": "Create a new user.",
            "funcName": "CreateUser",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                },
                {
                    "name": "immunity",
                    "type": "int32",
                    "ref": false,
                    "description": "User immunity (set -1 to return highest group priotiry)."
                },
                {
                    "name": "lgroups",
                    "type": "string[]",
                    "ref": false,
                    "description": "Array of groups to inherit."
                },
                {
                    "name": "perms",
                    "type": "string[]",
                    "ref": false,
                    "description": "Array of permissions."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if created, false if user already exists|parent groups does not exist."
            }
        },
        {
            "name": "DeleteUser",
            "group": "UserManager",
            "description": "Delete a user.",
            "funcName": "DeleteUser",
            "paramTypes": [
                {
                    "name": "id",
                    "type": "uint64",
                    "ref": false,
                    "description": "Player ID."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if deleted, false if user does not exist."
            }
        },
        {
            "name": "SetParent",
            "group": "GroupManager",
            "description": "Set parent group for child group",
            "funcName": "SetParent",
            "paramTypes": [
                {
                    "name": "child_name",
                    "type": "string",
                    "ref": false,
                    "description": "Child group name"
                },
                {
                    "name": "parent_name",
                    "type": "string",
                    "ref": false,
                    "description": "Parent group name to set"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if both groups exist, otherwise false"
            }
        },
        {
            "name": "GetParent",
            "group": "GroupManager",
            "description": "Get parent of requested group",
            "funcName": "GetParent",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name"
                }
            ],
            "retType": {
                "type": "string",
                "description": "Parent group name, or empty string if group/parent not found"
            }
        },
        {
            "name": "DumpPermissionsGroup",
            "group": "GroupManager",
            "description": "Get permissions of group",
            "funcName": "DumpPermissionsGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name"
                }
            ],
            "retType": {
                "type": "string[]",
                "description": "Array of group permissions"
            }
        },
        {
            "name": "HasPermissionGroup",
            "group": "GroupManager",
            "description": "Check if a group has a specific permission.",
            "funcName": "HasPermissionGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "int32",
                "enum": {
                    "name": "Access",
                    "values": [
                        {
                            "name": "NotFound",
                            "value": 0,
                            "description": "Group not found."
                        },
                        {
                            "name": "Disallow",
                            "value": 1,
                            "description": "Permission denied."
                        },
                        {
                            "name": "Allow",
                            "value": 2,
                            "description": "Permission allowed."
                        }
                    ]
                },
                "description": "Return value indicating access status."
            }
        },
        {
            "name": "HasParentGroup",
            "group": "GroupManager",
            "description": "Check if parent_name is a parent group for child_name.",
            "funcName": "HasParentGroup",
            "paramTypes": [
                {
                    "name": "child_name",
                    "type": "string",
                    "ref": false,
                    "description": "Child group name."
                },
                {
                    "name": "parent_name",
                    "type": "string",
                    "ref": false,
                    "description": "Parent group name to check."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if name2 is among parents of child_name, otherwise false."
            }
        },
        {
            "name": "GetPriorityGroup",
            "group": "GroupManager",
            "description": "Get the priority of a group.",
            "funcName": "GetPriorityGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                }
            ],
            "retType": {
                "type": "int32",
                "description": "Group priority, or 0 if not found."
            }
        },
        {
            "name": "AddPermissionGroup",
            "group": "GroupManager",
            "description": "Add a permission to a group.",
            "funcName": "AddPermissionGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful; false if group not found."
            }
        },
        {
            "name": "RemovePermissionGroup",
            "group": "GroupManager",
            "description": "Remove a permission from a group.",
            "funcName": "RemovePermissionGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                },
                {
                    "name": "perm",
                    "type": "string",
                    "ref": false,
                    "description": "Permission line."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful; false if group not found."
            }
        },
        {
            "name": "GetCookieGroup",
            "group": "GroupManager",
            "description": "Get a cookie value for a group.",
            "funcName": "GetCookieGroup",
            "paramTypes": [
                {
                    "name": "gname",
                    "type": "string",
                    "ref": false,
                    "description": "Group name"
                },
                {
                    "name": "cname",
                    "type": "string",
                    "ref": false,
                    "description": "Cookie name"
                }
            ],
            "retType": {
                "type": "any",
                "description": "Cookie value (or value of cookie from parent group, if doesn't exist in child), or invalid if group/cookie does not exist."
            }
        },
        {
            "name": "SetCookieGroup",
            "group": "GroupManager",
            "description": "Set a cookie value for a group.",
            "funcName": "SetCookieGroup",
            "paramTypes": [
                {
                    "name": "gname",
                    "type": "string",
                    "ref": false,
                    "description": "Group name"
                },
                {
                    "name": "cname",
                    "type": "string",
                    "ref": false,
                    "description": "Cookie name"
                },
                {
                    "name": "cookie",
                    "type": "any",
                    "ref": false,
                    "description": "Cookie value."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if group does not exist."
            }
        },
        {
            "name": "GetAllCookiesGroup",
            "group": "GroupManager",
            "description": "Get all cookies from group.",
            "funcName": "GetAllCookiesGroup",
            "paramTypes": [
                {
                    "name": "gname",
                    "type": "string",
                    "ref": false,
                    "description": "Group name"
                },
                {
                    "name": "names",
                    "type": "string[]",
                    "ref": true,
                    "description": "Array of cookie names"
                },
                {
                    "name": "values",
                    "type": "any[]",
                    "ref": true,
                    "description": "Array of cookie values"
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if successful, false if group does not exist (cookies may be empty - returns empty arrays)."
            }
        },
        {
            "name": "CreateGroup",
            "group": "GroupManager",
            "description": "Create a new group.",
            "funcName": "CreateGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                },
                {
                    "name": "perms",
                    "type": "string[]",
                    "ref": false,
                    "description": "Array of permission lines."
                },
                {
                    "name": "priority",
                    "type": "int32",
                    "ref": false,
                    "description": "Group priority."
                },
                {
                    "name": "parent",
                    "type": "ptr64",
                    "ref": false,
                    "description": "Parent group pointer."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if created; false if group already exists."
            }
        },
        {
            "name": "DeleteGroup",
            "group": "GroupManager",
            "description": "Delete a group.",
            "funcName": "DeleteGroup",
            "paramTypes": [
                {
                    "name": "name",
                    "type": "string",
                    "ref": false,
                    "description": "Group name."
                }
            ],
            "retType": {
                "type": "bool",
                "description": "True if deleted; false if group not found."
            }
        }
    ]
}
